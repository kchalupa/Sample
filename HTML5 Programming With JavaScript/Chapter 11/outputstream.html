<!DOCTYPE html>

<html>
  <head>
    <title>Modifying the output stream.</title>
    <style>
      h1 { color:red; font-style:italic; text-align:center; }
      p { color:blue; font-family:cursive; }
    </style>
    <script lang="JavaScript">

      /**
       * This example is a little strange, I noticed in the last few examples that document.write clears the document.
       * When the document.write is called, the whole DOM is erased.  Evidence of this is shown when inspecting the DOM 
       * in the browser.  Doing it the author's way, you only print out h1 and you get errors in the console.
       */
      function printAJStyles()
      {
        var results = "";

        // Get  the first stylesheet associated with this document.
        var style = document.styleSheets[0];

        // Obtain the rules for this sheet.
        var rules = style.cssRules;

        alert('blah');

        // Display each of the rules on-screen.
        for(i=0;i<rules.length;++i)
        {
          alert('blah2');

          var rule = rules[i];
          results += '<p>' + rule.selectorText + '<br />';
          var styles = rule.style;
          for(j=0;j<styles.length;++j)
          {
            alert('blah3');

            var property = styles[j];

            // Use the property name to locate it's value and display both.
            results += property + ' : ' + styles.getPropertyValue(property) + '<br />';
          }

          results += '</p>';
        }

        document.getElementById('result').innerHTML = results;
      }

    </script>
  </head>
  <body>
    <h1>Modifying the Output Stream</h1>

    <p><input type="button" value="Print Styles" onClick="printAJStyles();" /></p>

    <p><div id="result"></div></p>
  </body>
</html>